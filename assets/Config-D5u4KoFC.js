import{$ as e,At as t,B as n,Bt as r,Ct as i,Et as a,F as o,Ft as s,H as c,I as l,It as u,J as d,L as f,Lt as p,M as m,N as h,Ot as g,P as _,Qt as v,R as y,St as b,Tt as ee,Ut as te,V as ne,_n as x,_t as S,an as C,c as re,ct as w,dt as ie,et as ae,f as T,fn as oe,ft as se,gn as E,gt as D,hn as O,ht as k,in as A,kt as j,ln as M,m as N,mn as P,n as F,nn as I,pn as L,pt as R,rn as z,sn as B,tt as V,un as H,v as U,xn as W,y as G,z as K,zt as q}from"./index-C6424h6m.js";var ce=z(`<input type=checkbox>`),le=z(`<input>`),ue=z(`<select>`),de=z(`<label>`),fe=z(`<option>A`),J=z(`<option>AAAA`),pe=z(`<option>CNAME`),me=z(`<option>TXT`),he=z(`<option>MX`),ge=z(`<option>SRV`),_e=z(`<option>HTTPS`),ve=z(`<option>NS`),ye=z(`<option>DNSKEY`),be=z(`<option>DS`),xe=z(`<option>SIG`),Se=z(`<option>SOA`),Ce=z(`<option>RRSIG`),we=z(`<option>RP`),Te=z(`<div class="flex flex-col overflow-auto p-4">`),Ee=z(`<div class="flex flex-col"><form class=join>`),De=z(`<div class=py-2>`),Oe=z(`<div class="grid grid-cols-3 gap-2"><fieldset class=fieldset></fieldset><fieldset class=fieldset></fieldset><fieldset class=fieldset>`),ke=z(`<form class="grid grid-cols-3 gap-2 sm:grid-cols-5">`),Ae=z(`<div class="flex flex-col gap-4"><div class="grid grid-cols-3 gap-2"><fieldset class=fieldset></fieldset><fieldset class=fieldset></fieldset><fieldset class=fieldset></fieldset></div><div class="grid grid-cols-2 gap-4 sm:grid-cols-2">`),Y=z(`<option>`),je=z(`<fieldset class=fieldset>`),Me=z(`<div class="flex flex-col gap-2"><div class="flex flex-col"></div><div class="flex flex-col">`),Ne=z(`<div class="grid grid-cols-1 gap-4 sm:grid-cols-2"><div class="flex flex-col gap-2"><div class="flex flex-col"></div><div class="flex flex-col"></div><div class="flex flex-col"></div></div><div class="flex flex-col gap-2"><div class="flex flex-col items-center"><div class=h-[2.5rem]>`),Pe=z(`<div class="mx-auto flex max-w-screen-md flex-col gap-4">`),X=e=>{let[t,n]=W(e,[`class`]);return(()=>{var e=ce();return I(e,x({get class(){return r(`toggle`,t.class)}},n),!1,!1),e})()},Z=e=>{let[t,n]=W(e,[`class`]);return(()=>{var e=le();return I(e,x({get class(){return r(`input min-w-0`,t.class)}},n),!1,!1),e})()},Q=e=>{let[t,n]=W(e,[`class`]);return(()=>{var e=ue();return I(e,x({get class(){return r(`select`,t.class)}},n),!1,!0),v(e,()=>M(()=>n.children)()),e})()},$=e=>{let[t,n]=W(e,[`class`]);return(()=>{var e=de();return I(e,x({get class(){return r(`label truncate`,t.class)}},n),!1,!0),v(e,()=>M(()=>n.children)()),e})()},Fe=j({name:t(),type:t()}),Ie=()=>{let[e]=S(),t=G(),n=`google.com`,{form:r,isSubmitting:i}=u({extend:s({schema:Fe}),onSubmit:e=>t.get(`dns/query`,{searchParams:{name:e.name||n,type:e.type}}).json().then(({Answer:e})=>o(e?.map(({data:e})=>e)||[])).catch(e=>te.error(e.message))}),[a,o]=E([]);return(()=>{var t=Ee(),s=t.firstChild;return A(r,s,()=>r),v(s,H(Z,{type:`search`,name:`name`,class:`join-item w-full`,placeholder:n,onInput:e=>{e.target.value||o([])}}),null),v(s,H(Q,{name:`type`,class:`join-item max-w-max`,get children(){return[fe(),J(),pe(),me(),he(),ge(),_e(),ve(),ye(),be(),xe(),Se(),Ce(),we()]}}),null),v(s,H(q,{type:`submit`,class:`join-item max-w-max btn-primary`,get loading(){return i()},get children(){return e(`dnsQuery`)}}),null),v(t,H(B,{get when(){return a().length>0},get children(){var e=Te();return v(e,H(C,{get each(){return a()},children:e=>(()=>{var t=De();return v(t,e),t})()})),e}}),null),t})()},Le=j({port:g(),"socks-port":g(),"redir-port":g(),"tproxy-port":g(),"mixed-port":g()}),Re=({isSingBox:e})=>{let[t]=S(),r=[{label:()=>t(`port`,{name:`Mixed`}),key:`mixed-port`,onChange:e=>void n(`mixed-port`,Number(e.target.value),h)},{label:()=>t(`port`,{name:`HTTP`}),key:`port`,onChange:e=>void n(`port`,Number(e.target.value),h)},{label:()=>t(`port`,{name:`Socks`}),key:`socks-port`,onChange:e=>void n(`socks-port`,Number(e.target.value),h)},{label:()=>t(`port`,{name:`Redir`}),key:`redir-port`,onChange:e=>void n(`redir-port`,Number(e.target.value),h)},{label:()=>t(`port`,{name:`TProxy`}),key:`tproxy-port`,onChange:e=>void n(`tproxy-port`,Number(e.target.value),h)}],{form:i,setInitialValues:a,reset:d}=u({extend:s({schema:Le})}),[p,{refetch:h}]=O(m);oe(()=>{let e=p();e&&(a(e),d())});let g=L(()=>{let e=p();return e?.[`mode-list`]||e?.modes||[`rule`,`direct`,`global`]});return(()=>{var a=Ae(),s=a.firstChild,u=s.firstChild,d=u.nextSibling,m=d.nextSibling,b=s.nextSibling;return v(u,H($,{for:`enable-allow-lan`,get children(){return t(`allowLan`)}}),null),v(u,H(X,{id:`enable-allow-lan`,get checked(){return p()?.[`allow-lan`]},onChange:e=>void n(`allow-lan`,e.target.checked,h)}),null),v(d,H($,{for:`mode`,get children(){return t(`runningMode`)}}),null),v(d,H(Q,{id:`mode`,onChange:e=>void n(`mode`,e.target.value,h),get children(){return H(C,{get each(){return g()},children:e=>(()=>{var n=Y();return n.value=e,v(n,()=>t(e)??e),P(()=>n.selected=e===p()?.mode),n})()})}}),null),v(m,H($,{for:`interface-name`,get children(){return t(`outboundInterfaceName`)}}),null),v(m,H(Z,{id:`interface-name`,get value(){return p()?.[`interface-name`]},onChange:e=>void n(`interface-name`,e.target.value,h)}),null),v(a,H(B,{get when(){return!e()},get children(){return[(()=>{var e=Oe(),r=e.firstChild,i=r.nextSibling,a=i.nextSibling;return v(r,H($,{for:`enable-tun-device`,get children(){return t(`enableTunDevice`)}}),null),v(r,H(X,{id:`enable-tun-device`,get checked(){return p()?.tun?.enable},onChange:e=>void n(`tun`,{enable:e.target.checked},h)}),null),v(i,H($,{for:`tun-ip-stack`,get children(){return t(`tunModeStack`)}}),null),v(i,H(Q,{id:`tun-ip-stack`,onChange:e=>void n(`tun`,{stack:e.target.value},h),get children(){return H(C,{each:[`Mixed`,`gVisor`,`System`,`LWIP`],children:e=>(()=>{var t=Y();return t.value=e,v(t,e),P(()=>t.selected=p()?.tun?.stack===e),t})()})}}),null),v(a,H($,{for:`device-name`,get children(){return t(`tunDeviceName`)}}),null),v(a,H(Z,{id:`device-name`,get value(){return p()?.tun?.device},onChange:e=>void n(`tun`,{device:e.target.value},h)}),null),e})(),(()=>{var e=ke();return A(i,e,()=>i),v(e,H(C,{each:r,children:e=>(()=>{var t=je();return v(t,H($,{get for(){return e.key},get children(){return e.label()}}),null),v(t,H(Z,{get id(){return e.key},get name(){return e.key},type:`number`,get placeholder(){return e.label()},get onChange(){return e.onChange}}),null),t})()})),e})()]}}),b),v(b,H(q,{class:`btn-primary`,get loading(){return f()},onClick:l,get children(){return t(`reloadConfig`)}}),null),v(b,H(q,{class:`btn-accent`,get loading(){return o()},onClick:_,get children(){return t(`flushFakeIP`)}}),null),v(b,H(q,{class:`btn-warning`,get loading(){return K()},onClick:y,get children(){return t(`restartCore`)}}),null),v(b,H(B,{get when(){return!e()},get children(){return H(q,{class:`btn-secondary`,get loading(){return c()},onClick:ne,get children(){return t(`updateGEODatabases`)}})}}),null),a})()},ze=()=>{let[t]=S(),n=T(),r=[{label:`English`,value:i.EN},{label:`简体中文`,value:i.ZH},{label:`Русский`,value:i.RU}],o=[{label:`SystemUI`,value:b.SystemUI},{label:`FiraSans`,value:b.FiraSans}];return(()=>{var i=Ne(),s=i.firstChild,c=s.firstChild,l=c.nextSibling,u=l.nextSibling,f=s.nextSibling,m=f.firstChild,h=m.firstChild;return v(c,H(p,{get children(){return t(`switchFont`)}}),null),v(c,H(Q,{class:`w-full`,onChange:e=>R(e.target.value),get children(){return H(C,{each:o,children:e=>(()=>{var t=Y();return v(t,()=>e.label),P(()=>t.selected=V()===e.value),P(()=>t.value=e.value),t})()})}}),null),v(l,H(p,{get children(){return t(`switchLanguage`)}}),null),v(l,H(Q,{class:`w-full`,onChange:e=>D(e.target.value),get children(){return H(C,{each:r,children:e=>(()=>{var t=Y();return v(t,()=>e.label),P(()=>t.selected=k()===e.value),P(()=>t.value=e.value),t})()})}}),null),v(u,H(p,{get children(){return N()?.url}}),null),v(u,H(q,{class:`btn-info`,onClick:()=>{U(``),n(ee.Setup)},get children(){return t(`switchEndpoint`)}}),null),v(m,H(p,{get children(){return t(`autoSwitchTheme`)}}),h),v(h,H(X,{get checked(){return d()},onChange:e=>w(e.target.checked)})),v(f,H(B,{get when(){return d()},get children(){var n=Me(),r=n.firstChild,i=r.nextSibling;return v(r,H(p,{get children(){return t(`favDayTheme`)}}),null),v(r,H(Q,{class:`w-full`,onChange:e=>ie(e.target.value),get children(){return H(C,{each:a,children:t=>(()=>{var n=Y();return n.value=t,v(n,t),P(()=>n.selected=e()===t),n})()})}}),null),v(i,H(p,{get children(){return t(`favNightTheme`)}}),null),v(i,H(Q,{class:`w-full`,onChange:e=>se(e.target.value),get children(){return H(C,{each:a,children:e=>(()=>{var t=Y();return t.value=e,v(t,e),P(()=>t.selected=ae()===e),t})()})}}),null),n}}),null),i})()},Be=()=>{let e=T();if(!N())return e(`/setup`,{replace:!0}),null;let[t]=S(),[n]=O(h,{initialValue:``}),r=L(()=>n()?.includes(`sing-box`)||!1);return[H(re,{get children(){return t(`config`)}}),(()=>{var e=Pe();return v(e,H(B,{get when(){return!r()},get children(){return[H(p,{withDivider:!0,get children(){return t(`dnsQuery`)}}),H(Ie,{})]}}),null),v(e,H(p,{withDivider:!0,get children(){return t(`coreConfig`)}}),null),v(e,H(Re,{isSingBox:r}),null),v(e,H(p,{withDivider:!0,get children(){return t(`xdConfig`)}}),null),v(e,H(ze,{}),null),v(e,H(p,{withDivider:!0,get children(){return t(`version`)}}),null),v(e,H(B,{get when(){return!n.loading},get children(){return H(F,{frontendVersion:`v1.195.0`,backendVersion:n})}}),null),e})()]};export{Be as default};