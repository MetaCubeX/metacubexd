import{t as e}from"./IconChevronRight-C907_zys.js";import{t}from"./IconReload-BjCRbs9u.js";import{$t as n,Bt as r,C as i,Dt as a,Ht as o,Nt as s,Pt as c,Qt as l,Rt as u,S as d,T as f,Vt as p,Xt as m,Zt as h,_t as g,a as _,an as v,bn as y,c as ee,f as te,gn as b,i as x,it as S,ln as C,m as w,mn as T,nt as E,o as D,ot as O,pn as k,q as ne,r as re,rn as A,rt as j,sn as M,st as N,tn as ie,un as P,vt as ae,w as oe,x as F,zt as I}from"./index-C6424h6m.js";var L=c(`outline`,`brand-speedtest`,`BrandSpeedtest`,[[`path`,{d:`M5.636 19.364a9 9 0 1 1 12.728 0`}],[`path`,{d:`M16 9l-4 4`}]]),R={width:0,height:0};function z(){return{width:window.innerWidth,height:window.innerHeight}}function B(){let[e,t]=p(R,z);return o(window,`resize`,()=>t(z())),e}var V=A(`<div class=mb-2>`),H=A(`<div class="flex gap-2"><div class=flex-1></div><div class=flex-1>`),U=A(`<div class="grid grid-cols-1 place-items-start gap-2">`);const W=e=>{let t=B(),n=k(()=>t.width>480);return()=>{let t=C(()=>e.children),r=e=>t()?.filter((t,n)=>n%2===e).map(e=>(()=>{var t=V();return l(t,e),t})());return N()&&n()?(()=>{var e=H(),t=e.firstChild,n=t.nextSibling;return l(t,()=>r(0)),l(n,()=>r(1)),e})():(()=>{var e=U();return l(e,t),e})()}};var G=A(`<div class="flex h-full flex-col gap-2"><div class="flex items-center gap-2"><div class="tabs gap-2 tabs-box tabs-sm"></div><div class=ml-auto></div></div><div class="flex-1 overflow-y-auto">`),K=A(`<button><span></span><div class="badge badge-sm">`),se=A(`<div>`),ce=A(`<span class=whitespace-nowrap>`),le=A(`<div class=space-y-2><div class="flex items-center justify-between pr-8"><div class="flex items-center"><span></span><div class="ml-2 badge badge-sm"></div></div></div><div class="flex flex-wrap items-center justify-between gap-2"><div class="badge badge-sm badge-primary"><span class=font-bold></span></div><div class="badge badge-sm badge-secondary">/s`),ue=A(`<img>`),de=A(`<div class="flex items-center justify-between pr-8"><div class="flex flex-wrap items-center gap-1"><span class="line-clamp-1 break-all"></span><div class="badge badge-sm"></div><div class="badge badge-sm"></div></div><div class="flex items-center gap-2">`),fe=A(`<div class="flex flex-col gap-2"><div class="text-sm text-slate-500"> `),q=function(e){return e.proxyProviders=`proxyProviders`,e.proxies=`proxies`,e}(q||{}),J=()=>{let n=te();if(!w())return n(`/setup`,{replace:!0}),null;let o,[c]=g(),{fetchProxies:p,proxies:h,selectProxyInGroup:C,proxyProviders:A,updateProviderByProviderName:N,updateAllProvider:R,proxyGroupLatencyTest:z,proxyProviderLatencyTest:B,proxyGroupLatencyTestingMap:V,proxyProviderLatencyTestingMap:H,isAllProviderUpdating:U,updatingMap:J}=F(),Y=k(()=>h().filter(e=>!e.hidden)),{speedGroupByName:pe}=ne(),[X,me]=ae(b({}),{name:`collapsedMap`,storage:localStorage}),Z=(e,t)=>{me(n=>({...n,[e]:t}))};y(p);let he=async(e,t)=>{e.stopPropagation(),z(t)},ge=e=>e.replace(`<svg`,~e.indexOf(`xmlns`)?`<svg`:`<svg xmlns="http://www.w3.org/2000/svg"`).replace(/"/g,`'`).replace(/%/g,`%25`).replace(/#/g,`%23`).replace(/\{/g,`%7B`).replace(/\}/g,`%7D`).replace(/</g,`%3C`).replace(/>/g,`%3E`),Q=(e,t)=>{e.stopPropagation(),B(t)},_e=(e,t)=>{e.stopPropagation(),N(t)},ve=async e=>{e.stopPropagation(),R()},[$,ye]=b(q.proxies),be=()=>[{type:q.proxies,name:c(`proxies`),count:Y().length},{type:q.proxyProviders,name:c(`proxyProviders`),count:A().length}];return[P(ee,{get children(){return c(`proxies`)}}),(()=>{var n=G(),p=n.firstChild,h=p.firstChild,g=h.nextSibling,y=p.nextSibling;return l(h,P(v,{get each(){return be()},children:e=>(()=>{var t=K(),n=t.firstChild,i=n.nextSibling;return t.$$click=()=>ye(e.type),l(n,()=>e.name),l(i,()=>e.count),T(()=>m(t,r($()===e.type&&`bg-primary !text-neutral`,`sm:tab-md tab gap-2 px-2`))),t})()})),l(p,P(M,{get when(){return $()===q.proxyProviders},get children(){return P(I,{class:`btn btn-circle btn-sm`,get disabled(){return U()},onClick:e=>ve(e),get icon(){return P(t,{get class(){return r(U()&&`animate-spin text-success`)}})}})}}),g),l(g,P(I,{class:`btn-circle btn-sm btn-primary`,onClick:()=>o?.showModal(),get icon(){return P(s,{})}})),l(y,P(M,{get when(){return $()===q.proxies},get children(){return P(W,{get children(){return P(v,{get each(){return Y()},children:t=>{let n=k(()=>i({proxyNames:f({proxyNames:t.all??[],orderingType:O(),testUrl:t.testUrl||null}),enabled:E(),testUrl:t.testUrl||null}));return P(u,{get isOpen(){return X()[t.name]},title:(()=>{var i=le(),o=i.firstChild,s=o.firstChild,c=s.firstChild,u=c.nextSibling,d=o.nextSibling.firstChild,f=d.firstChild,p=d.nextSibling,m=p.firstChild;return l(s,P(M,{get when(){return t.icon},get children(){return P(M,{get when(){return t.icon.startsWith(`data:image/svg+xml`)},get fallback(){return(()=>{var e=ue();return T(n=>{var r=t.icon,i=`${j()}px`,a=`${S()}px`;return r!==n.e&&ie(e,`src`,n.e=r),i!==n.t&&((n.t=i)==null?e.style.removeProperty(`height`):e.style.setProperty(`height`,i)),a!==n.a&&((n.a=a)==null?e.style.removeProperty(`margin-right`):e.style.setProperty(`margin-right`,a)),n},{e:void 0,t:void 0,a:void 0}),e})()},get children(){var e=se();return e.style.setProperty(`color`,`oklch(var(--p) / var(--tw-bg-opacity))`),e.style.setProperty(`background-color`,`currentColor`),e.style.setProperty(`mask-size`,`100% 100%`),T(n=>{var r=`${j()}px`,i=`${j()}px`,a=`${S()}px`,o=`url("${ge(t.icon)}")`;return r!==n.e&&((n.e=r)==null?e.style.removeProperty(`height`):e.style.setProperty(`height`,r)),i!==n.t&&((n.t=i)==null?e.style.removeProperty(`width`):e.style.setProperty(`width`,i)),a!==n.a&&((n.a=a)==null?e.style.removeProperty(`margin-right`):e.style.setProperty(`margin-right`,a)),o!==n.o&&((n.o=o)==null?e.style.removeProperty(`mask-image`):e.style.setProperty(`mask-image`,o)),n},{e:void 0,t:void 0,a:void 0,o:void 0}),e}})}}),c),l(c,()=>t.name),l(u,()=>t.all?.length),l(o,P(I,{class:`btn-circle btn-sm`,get disabled(){return V()[t.name]},onClick:e=>he(e,t.name),get icon(){return P(L,{get class(){return r(V()[t.name]&&`animate-pulse text-success`)}})}}),null),l(f,()=>oe(t.type)),l(d,P(M,{get when(){return t.now?.length>0},get children(){return[P(e,{size:18}),(()=>{var e=ce();return l(e,()=>t.now),e})()]}}),null),l(p,()=>a(pe()[t.name]??0).toString(),m),l(i,P(M,{get when(){return!X()[t.name]},get children(){return P(x,{get proxyNameList(){return n()},get now(){return t.now},get testUrl(){return t.testUrl||null}})}}),null),i})(),onCollapse:e=>Z(t.name,e),get children(){return P(v,{get each(){return n()},children:e=>P(_,{proxyName:e,get testUrl(){return t.testUrl||null},get timeout(){return t.timeout??null},get isSelected(){return t.now===e},onClick:()=>void C(t,e)})})}})}})}})}}),null),l(y,P(M,{get when(){return $()===q.proxyProviders},get children(){return P(W,{get children(){return P(v,{get each(){return A()},children:e=>{let n=k(()=>f({orderingType:O(),proxyNames:e.proxies.map(e=>e.name)??[],testUrl:e.testUrl}));return P(u,{get isOpen(){return X()[e.name]},title:[(()=>{var n=de(),i=n.firstChild,a=i.firstChild,o=a.nextSibling,s=o.nextSibling,c=i.nextSibling;return l(a,()=>e.name),l(o,()=>e.proxies.length),l(s,()=>e.vehicleType),l(c,P(I,{class:`btn btn-circle btn-sm`,get disabled(){return J()[e.name]},onClick:t=>_e(t,e.name),get icon(){return P(t,{get class(){return r(J()[e.name]&&`animate-spin text-success`)}})}}),null),l(c,P(I,{class:`btn btn-circle btn-sm`,get disabled(){return H()[e.name]},onClick:t=>Q(t,e.name),get icon(){return P(L,{get class(){return r(H()[e.name]&&`animate-pulse text-success`)}})}}),null),n})(),P(re,{get subscriptionInfo(){return e.subscriptionInfo}}),(()=>{var t=fe(),r=t.firstChild,i=r.firstChild;return l(r,()=>c(`updated`),i),l(r,()=>d(e.updatedAt),null),l(t,P(M,{get when(){return!X()[e.name]},get children(){return P(x,{get proxyNameList(){return n()},get testUrl(){return e.testUrl}})}}),null),t})()],onCollapse:t=>Z(e.name,t),get children(){return P(v,{get each(){return n()},children:t=>P(_,{proxyName:t,get testUrl(){return e.testUrl},get timeout(){return e.timeout??null}})})}})}})}})}}),null),l(n,P(D,{ref:e=>o=e}),null),n})()]};h([`click`]);export{J as default};