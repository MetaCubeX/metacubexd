import{_ as K}from"./ChlC2KHF.js";import{e as Q,f as X,u as Y,h as E,g as V,o as r,c as d,a as o,b as k,i as t,j as S,v as ee,k as te,n as L,l as p,F as w,r as I,t as l,m as M,p as oe,q as se,s as ne,w as G,x as D,y as T,z as v}from"./CRZAT9oH.js";import{u as ae,I as P}from"./f_HB2hkb.js";import{I as re,a as le}from"./jjBtUPnd.js";import{I as ie}from"./DeLuOR_c.js";import{I as ce}from"./C2N-YNw5.js";import{I as ue,a as de,b as B,c as N}from"./Bbil2lkN.js";import{L as z}from"./vIF72wqi.js";import{u as pe}from"./Dw963Xf9.js";import{_ as be}from"./DlAUqK2U.js";import"./DwBSywMz.js";import"./qqqfUOwc.js";const fe={class:"flex h-full min-h-0 flex-col gap-3"},ge={class:"flex shrink-0 items-center gap-3"},me={class:"relative flex-1"},ve=["placeholder"],ye={class:"flex gap-2"},xe={class:"min-h-0 flex-1 overflow-auto rounded-xl border border-base-content/10 bg-base-200/50"},_e={class:"sticky top-0 z-10 bg-base-200"},he={class:"flex items-center gap-2"},ke=["onClick"],Ce=["onClick"],Se=["onClick"],we=["colspan"],ze={class:"flex items-center gap-2 text-primary"},Ve={class:"font-semibold"},Le={class:"text-xs text-base-content/60"},Ie={key:0,class:"flex flex-col items-center justify-center gap-4 px-4 py-12 text-base-content/40"},Me={class:"flex flex-col gap-5"},De={class:"flex flex-col gap-2"},Te={class:"text-sm font-medium text-base-content/70"},$e={value:"xs"},qe={value:"sm"},Fe={value:"md"},Re={value:"lg"},je={class:"flex flex-col gap-2"},Ee={class:"text-sm font-medium text-base-content/70"},Ge={value:"info"},Pe={value:"error"},Be={value:"warning"},Ne={value:"debug"},Ue={value:"silent"},Oe={class:"flex flex-col gap-2"},Ze={class:"text-sm font-medium text-base-content/70"},Ae=Q({__name:"logs",setup(He){const{t:a}=X();Y({title:v(()=>a("logs"))});const y=ae(),b=pe(),x=T(""),$=T();function C(e){return e.match(/^\[([^\]]+)\]/)?.[1]??""}function U(e){switch(e){case z.Error:return"text-error font-semibold";case z.Warning:return"text-warning font-semibold";case z.Info:return"text-info font-semibold";case z.Debug:return"text-success font-semibold";default:return""}}const f=[{id:"seq",label:a("sequence"),sortable:!0,groupable:!1,render:e=>String(e.seq),sortValue:e=>e.seq},{id:"level",label:a("level"),sortable:!0,groupable:!0,render:e=>E("span",{class:U(e.type)},`[${e.type}]`),sortValue:e=>e.type,groupValue:e=>e.type},{id:"type",label:a("type"),sortable:!0,groupable:!0,render:e=>E("span",{class:"text-base-content/60"},C(e.payload)),sortValue:e=>C(e.payload),groupValue:e=>C(e.payload)||"(empty)"},{id:"payload",label:a("payload"),sortable:!1,groupable:!1,render:e=>e.payload}],_=V("logsTableSortColumn","seq"),g=V("logsTableSortDesc",!0),m=V("logsTableGrouping",null),h=T({}),q=v(()=>{if(!x.value)return y.logs;const e=x.value.toLowerCase();return y.logs.filter(n=>n.payload.toLowerCase().includes(e)||n.type.toLowerCase().includes(e)||C(n.payload).toLowerCase().includes(e))}),F=v(()=>{const e=f.find(n=>n.id===_.value);return e?.sortValue?[...q.value].sort((n,u)=>{const s=e.sortValue(n),i=e.sortValue(u);let c=0;return typeof s=="number"&&typeof i=="number"?c=s-i:typeof s=="string"&&typeof i=="string"&&(c=s.localeCompare(i)),g.value?-c:c}):q.value}),O=v(()=>m.value?f.find(e=>e.id===m.value):null),R=v(()=>{const e=O.value;if(!e?.groupValue)return F.value.map(s=>({type:"data",original:s}));const n=new Map;for(const s of F.value){const i=e.groupValue(s),c=n.get(i);c?c.push(s):n.set(i,[s])}const u=[];for(const[s,i]of n)if(u.push({type:"group",key:s,subRows:i}),h.value[s])for(const c of i)u.push({type:"data",original:c});return u});function Z(e){return f.find(n=>n.id===e)?.sortable??!1}function j(e){return _.value===e}function A(e){f.find(u=>u.id===e)?.sortable&&(_.value===e?g.value?g.value=!1:(_.value="",g.value=!0):(_.value=e,g.value=!0))}function H(e){m.value===e?m.value=null:m.value=e,h.value={}}function W(e){h.value[e]=!h.value[e]}const J=v(()=>b.tableSizeClassName(b.logsTableSize));return(e,n)=>{const u=K;return r(),d("div",fe,[o("div",ge,[o("div",me,[k(t(ie),{class:"pointer-events-none absolute top-1/2 left-3.5 -translate-y-1/2 text-base-content/40",size:18}),S(o("input",{"onUpdate:modelValue":n[0]||(n[0]=s=>te(x)?x.value=s:null),type:"search",class:"w-full rounded-lg border border-base-content/10 bg-base-200/60 py-2.5 pr-3.5 pl-10 text-sm text-base-content transition-all duration-200 placeholder:text-base-content/40 focus:border-primary focus:bg-base-100 focus:ring-3 focus:ring-primary/15 focus:outline-none",placeholder:t(a)("search")},null,8,ve),[[ee,t(x)]])]),o("div",ye,[o("button",{class:L(["flex h-9 w-9 cursor-pointer items-center justify-center rounded-lg border border-base-content/10 bg-base-200/60 text-base-content transition-all duration-200 hover:border-base-content/20 hover:bg-base-300",{"border-warning/30 bg-warning/15 text-warning":t(y).paused}]),onClick:n[1]||(n[1]=s=>t(y).togglePaused())},[t(y).paused?(r(),p(t(le),{key:1,size:18})):(r(),p(t(re),{key:0,size:18}))],2),o("button",{class:"flex h-9 w-9 cursor-pointer items-center justify-center rounded-lg border border-base-content/10 bg-base-200/60 text-base-content transition-all duration-200 hover:border-base-content/20 hover:bg-base-300",onClick:n[2]||(n[2]=s=>t($)?.open())},[k(t(ce),{size:18})])])]),o("div",xe,[o("table",{class:L(["table w-full border-collapse whitespace-nowrap",t(J)])},[o("thead",null,[o("tr",_e,[(r(),d(w,null,I(f,s=>o("th",{key:s.id,class:"border-b border-base-content/10 text-left font-semibold text-base-content"},[o("div",he,[o("div",{class:L(["flex-1",{"cursor-pointer select-none hover:text-primary":Z(s.id)}]),onClick:i=>A(s.id)},l(s.label),11,ke),j(s.id)&&!t(g)?(r(),p(t(ue),{key:0,class:"text-primary",size:16})):j(s.id)&&t(g)?(r(),p(t(de),{key:1,class:"text-primary",size:16})):M("",!0),s.groupable?(r(),d("button",{key:2,class:"flex cursor-pointer items-center justify-center border-none bg-transparent p-1 text-base-content/60 transition-colors duration-200 hover:text-primary",onClick:oe(i=>H(s.id),["stop"])},[t(m)===s.id?(r(),p(t(B),{key:0,size:16})):(r(),p(t(N),{key:1,size:16}))],8,Ce)):M("",!0)])])),64))])]),o("tbody",null,[(r(!0),d(w,null,I(t(R),(s,i)=>(r(),d(w,{key:s.type==="group"?`group-${s.key}`:s.original.seq},[s.type==="group"?(r(),d("tr",{key:0,class:"cursor-pointer bg-primary/5 hover:bg-primary/10",onClick:c=>W(s.key)},[o("td",{colspan:f.length,class:"border-b border-base-content/10"},[o("div",ze,[t(h)[s.key]?(r(),p(t(B),{key:0,size:16})):(r(),p(t(N),{key:1,size:16})),o("span",Ve,l(s.key),1),o("span",Le,"("+l(s.subRows.length)+")",1)])],8,we)],8,Se)):(r(),d("tr",{key:1,class:"animate-fade-in transition-colors duration-150 hover:bg-base-content/5",style:se({animationDelay:`${i%20*15}ms`})},[(r(),d(w,null,I(f,c=>o("td",{key:c.id,class:"border-b border-base-content/5"},[(r(),p(ne(()=>c.render(s.original))))])),64))],4))],64))),128))])],2),t(R).length===0?(r(),d("div",Ie,[k(t(P),{size:48,class:"opacity-50"}),o("span",null,l(t(a)("noData")),1)])):M("",!0)]),k(u,{ref_key:"settingsModal",ref:$,title:t(a)("logsSettings")},{icon:G(()=>[k(t(P),{size:24})]),default:G(()=>[o("div",Me,[o("div",De,[o("label",Te,l(t(a)("tableSize")),1),S(o("select",{"onUpdate:modelValue":n[3]||(n[3]=s=>t(b).logsTableSize=s),class:"w-full cursor-pointer rounded-lg border border-base-content/10 bg-base-100 px-3.5 py-2.5 text-sm text-base-content transition-colors duration-200 focus:border-primary focus:outline-none"},[o("option",$e,l(t(a)("xs")),1),o("option",qe,l(t(a)("sm")),1),o("option",Fe,l(t(a)("md")),1),o("option",Re,l(t(a)("lg")),1)],512),[[D,t(b).logsTableSize]])]),o("div",je,[o("label",Ee,l(t(a)("logLevel")),1),S(o("select",{"onUpdate:modelValue":n[4]||(n[4]=s=>t(b).logLevel=s),class:"w-full cursor-pointer rounded-lg border border-base-content/10 bg-base-100 px-3.5 py-2.5 text-sm text-base-content transition-colors duration-200 focus:border-primary focus:outline-none"},[o("option",Ge,l(t(a)("info")),1),o("option",Pe,l(t(a)("error")),1),o("option",Be,l(t(a)("warning")),1),o("option",Ne,l(t(a)("debug")),1),o("option",Ue,l(t(a)("silent")),1)],512),[[D,t(b).logLevel]])]),o("div",Oe,[o("label",Ze,l(t(a)("logMaxRows")),1),S(o("select",{"onUpdate:modelValue":n[5]||(n[5]=s=>t(b).logMaxRows=s),class:"w-full cursor-pointer rounded-lg border border-base-content/10 bg-base-100 px-3.5 py-2.5 text-sm text-base-content transition-colors duration-200 focus:border-primary focus:outline-none"},[...n[6]||(n[6]=[o("option",{value:200},"200",-1),o("option",{value:300},"300",-1),o("option",{value:500},"500",-1),o("option",{value:800},"800",-1),o("option",{value:1e3},"1000",-1)])],512),[[D,t(b).logMaxRows]])])])]),_:1},8,["title"])])}}}),rt=be(Ae,[["__scopeId","data-v-d01ccdcc"]]);export{rt as default};
