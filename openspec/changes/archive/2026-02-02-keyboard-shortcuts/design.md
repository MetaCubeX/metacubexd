## Context

MetaCubeXD 是 Mihomo 的 Web 仪表盘，使用 Nuxt 4 + Vue 3 构建。当前所有操作依赖鼠标点击，缺乏键盘快捷键支持。项目使用 VueUse 库，其中包含 `useMagicKeys` 等键盘相关 composable。

## Goals / Non-Goals

**Goals:**

- 实现全局键盘快捷键系统，支持页面导航和常用操作
- 提供快捷键帮助面板（按 `?` 显示）
- 支持用户自定义快捷键配置
- 确保快捷键不与浏览器/系统快捷键冲突

**Non-Goals:**

- 不支持复杂的快捷键宏录制
- 不支持游戏手柄等其他输入设备
- 不实现 Vim 模式的完整键绑定

## Decisions

### 1. 使用 VueUse 的 useMagicKeys

**决定**: 使用 `@vueuse/core` 中的 `useMagicKeys` 作为键盘监听基础。

**理由**:

- 项目已依赖 VueUse，无需引入新依赖
- 提供响应式的按键状态
- 支持组合键检测

**备选方案**:

- 原生 `addEventListener` - 需要手动管理生命周期，代码更复杂
- `hotkeys-js` 库 - 增加额外依赖

### 2. 快捷键配置存储

**决定**: 使用 Pinia store + localStorage 持久化快捷键配置。

**理由**:

- 与项目现有状态管理方案一致
- localStorage 足够存储少量配置数据
- 支持跨页面共享配置

### 3. 快捷键格式

**决定**: 采用 `modifier+key` 格式，如 `g+p`、`ctrl+r`。

**理由**:

- 简洁易读
- 与主流应用习惯一致（如 GitHub 的 `g p`）

### 4. 焦点管理

**决定**: 当焦点在输入框内时禁用全局快捷键。

**理由**:

- 避免输入文字时触发快捷键
- 用户体验更自然

## Risks / Trade-offs

| 风险               | 缓解措施                                            |
| ------------------ | --------------------------------------------------- |
| 与浏览器快捷键冲突 | 避免使用 Ctrl+T/W/N 等常见快捷键，使用 g+x 导航模式 |
| 移动端不适用       | 仅在桌面端显示快捷键提示，移动端隐藏                |
| 自定义配置复杂     | 提供预设方案，高级配置可选                          |
